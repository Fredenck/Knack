<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>XY Point Evention: Recruiter</title>
  <script type="module" src="https://cdn.jsdelivr.net/npm/@ionic/core/dist/ionic/ionic.esm.js"></script>
  <script nomodule src="https://cdn.jsdelivr.net/npm/@ionic/core/dist/ionic/ionic.js"></script>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@ionic/core/css/ionic.bundle.css"/>
  <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js" type="text/javascript"></script>

   <script type="text/javascript">
      console.log("34sdf2");
      //db operations
      var db = openDatabase('mydb', '1.0', 'Test DB', 500 * 1024 * 1024);
      var msg;

      db.transaction(function (tx) {
          tx.executeSql('CREATE TABLE IF NOT EXISTS LOGS (company, position, date)');
          // tx.executeSql('INSERT INTO LOGS (id, log) VALUES (1, "foobar")');
          // tx.executeSql('INSERT INTO LOGS (id, log) VALUES (2, "logmsg")');
          document.querySelector('#status').innerHTML =  msg;
      })

      db.transaction(function (tx) {
          tx.executeSql('SELECT * FROM LOGS', [], function (tx, results) {
              var len = results.rows.length, i;
              msg = "<p>Found rows: " + len + "</p>";
              document.querySelector('#status').innerHTML +=  msg;

              for (i = 0; i < len; i++) {
                  msg = "<p><b>" + results.rows.item(i).company + "</b></p>";
                  document.querySelector('#status').innerHTML +=  msg;
              }
          }, null);
      });

      //input
      var inputArr = [];

      function formsub() {
          for(var i of document.getElementsByName("f")) {
              inputArr.push(i.value);
          }
          db.transaction(function(tx) {
              tx.executeSql("INSERT INTO LOGS VALUES(?,?,?)", inputArr, function (tx, results) {
                  //do nothing
              }, null);
          });

          //update recent
          updateRecent();
      }

      function updateRecent() {
          db.transaction(function(tx) {
              tx.executeSql('SELECT * FROM LOGS ORDER BY DATE DESC LIMIT 10', [], function(tx, results) {
                  for(var i = 0; i < results.rows.length; i++) {

                  }
              }, null);
          })
      }

  </script>
<!--    <script>-->
<!--        $('#submit-btn').click(function(){-->
<!--            // var arr = $(this).serializeArray();-->
<!--            console.log(document.getElementById("company").value);-->
<!--            return false; //      /<&#45;&#45; Only, if you don't want the form to be submitted after above commands-->
<!--        });-->
<!--    </script>-->
</head>
<body>
<ion-content>
  <ion-grid>
    <ion-row>
      <ion-col size="9">
        <ion-row style="border-color: black; border-width: 5px; border-style:solid; margin-bottom : -1px;">
          graph
        </ion-row>
        <ion-row style="border-color: black; border-width: 5px; border-style:solid; margin-bottom : -1px;">
            <input type="text" id="company" name="f" placeholder="Company">
            <input type="text" id="position" name="f" placeholder="Position">
            <input type="text" id="date" name="f" placeholder="Date">
            <button id="submit-btn" onclick="formsub()" value="Submit">Submit</button>
                <!--
to log:
$('#app-form').on('submit', function(){
    var arr = $(this).serializeArray();
    console.log(arr);
    return false; //      /<-- Only, if you don't want the form to be submitted after above commands
});
-->
        </ion-row>
        <ion-row style="border-color: black; border-width: 5px; border-style:solid; margin-bottom : -1px; text-align: center;">
        <ion-grid>
            <ion-row style="margin-bottom: -1px; text-align: center;" id="recentItem">

            </ion-row>
<!--            <ion-row style="margin-bottom: -1px; text-align: center;" class="recentItem">-->
<!--                <ion-col size="4" style="margin-bottom : -1px;">-->
<!--                    Company-->
<!--                </ion-col>-->
<!--                <ion-col size="4" style="margin-bottom : -1px;">-->
<!--                    Position-->
<!--                </ion-col>-->
<!--                <ion-col size="4" style="margin-bottom : -1px;">-->
<!--                    Date-->
<!--                </ion-col>-->
<!--            </ion-row>-->
<!--            -->
<!--            <ion-row style="margin-bottom : -1px; text-align: center;" class="recentItem">-->
<!--                <ion-col size="4" style="margin-bottom : -1px;">-->
<!--                    Company-->
<!--                </ion-col>-->
<!--                <ion-col size="4" style="margin-bottom : -1px;">-->
<!--                    Position-->
<!--                </ion-col>-->
<!--                <ion-col size="4" style="margin-bottom : -1px;">-->
<!--                    Date-->
<!--                </ion-col>-->
<!--            </ion-row>-->
        </ion-grid>
        </ion-row>
      </ion-col>
      <ion-col size="3" style="border-color: black; border-width: 5px; border-style:solid; margin-bottom : -1px;">
          <ion-grid>
            <ion-row style="margin-bottom : -1px; text-align: center;" class="recentNotif">
                <ion-col>
                Company (Date) <br> Position
                </ion-col>
                <ion-col> <input type="submit" value="Accepted"> </ion-col>
            </ion-row>
              
            <ion-row style="margin-bottom : -1px; text-align: center;" class="recentNotif">
                <ion-col>
                Company (Date) <br> Position
                </ion-col>
                <ion-col> <input type="submit" value="Follow Up"> </ion-col>
            </ion-row>
          </ion-grid>
      </ion-col>
    </ion-row>
  </ion-grid>
</ion-content>
</body>
</html>
